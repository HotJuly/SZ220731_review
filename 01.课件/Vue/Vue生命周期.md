# Vue生命周期

1. 请问Vue2中一共具有多少个生命周期?
   1. 一共12个,其中11个是前端渲染,还有1个是后端渲染专用
   2. 常用的有8个
2. 阶段划分
   1. 初始化阶段(挂载阶段)
      1. beforeCreate
         1. **beforeCreate之前,Vue正在初始化事件和生命周期**
      2. created
         1. 发送请求
            1. 此处发送请求时机更早,相对来说,更早出去的请求,应该更早回来
         2. 注意:不要在这里做一些比较占用时间,比较复杂的逻辑操作
         3. **beforeCreate之后created之前,Vue正在初始化注入和响应式**
            1. **注入:将一些数据放到当前组件实例对象身上,方便后续开发者访问**
               1. **例如:将data,props,computed,methods,provide的等数据全部在组件this身上来一份**
                  1. **数据代理就是数据注入的其中一员**
            2. **响应式:其实就是源码中的数据劫持,会将data中所有的属性都变成访问描述符**
      3. beforeMount
         1. **created之后beforeMount之前,Vue会收集需要解析的模版,并将模版解析成为render函数**
            1. **注意:此处Vue只会创建得到render函数,并不会调用它**
      4. mounted
         1. 发送请求
            1. 请求发送的比较晚,所以回来的相对时间也比较晚
            2. 在这里可以做巨大多数的事情,因为这里代表组件已经挂载结束了,即便阻塞,对页面影响也不会太大
         2. 开启定时器
         3. 操作真实DOM
            1. 创建轮播图
            2. better-scroll滑动库
         4. **beforeMount之后mounted之前,Vue会调用render函数,生成当前组件的虚拟DOM,然后根据虚拟DOM创建对应的真实DOM,并替换掉页面上对应的el元素**
   2. 更新阶段
      1. beforeUpdate
         1. 此处由于响应式属性更新会触发,此处可以拿到最新数据,但是无法获取到最新的DOM结构
      2. updated
         1. 此处由于响应式属性更新会触发,此处可以拿到最新数据,也可以获取到最新的DOM结构
         2. 一般会在这里做二次操作真实DOM的事情
   3. 卸载阶段
      1. beforeDestory
         1. 清除定时器
         2. **解绑事件**
            1. **请问使用@符绑定的原生DOM事件,是否需要手动解绑?**
               1. **不需要手动解绑,因为组件卸载的时候,会自动销毁内部的真实DOM,那么真实DOM销毁的时候,垃圾回收机制也会自动回收事件的回调函数**
                  1. **扩展:垃圾IE除外,IE中很可能会出现节点已经被销毁了,但是事件回调函数依旧还在的情况**
            2. **请问使用addEventListener或者onclick语法绑定的原生DOM事件,是否需要手动解绑?**
               1. **需要手动解绑,因为即便当前组件销毁了,但是当前页面的document和window对象并不会销毁,那么绑定在他们身上的事件会有残留**
            3. **请问使用@符或者$on给当前组件实例绑定的自定义事件,是否需要手动解绑?**
               1. **不需要手动解绑,Vue中会通过$listeners对象,收集当前组件实例所有的自定义事件,所以在组件卸载的时候,会自动解绑**
            4. **请问使用$on语法,绑定在全局事件总线对象身上的事件,是否需要手动解绑?**
               1. **需要手动解绑,因为当前组件卸载并不会导致全局事件总线对象销毁,他依旧存活,那么他身上的自定义事件就会遗留,越绑定越多**
      2. destoryed
   4. keep-alive专用
      1. activated(激活)
         1. 用来替代被缓存组件的初始化阶段
      2. deactivated(失活)
         1. 用来替代被缓存组件的卸载阶段
   5. 捕获后代组件错误
      1. errorCaptured
         1. 项目中,实际上用的更多的,应该是Vue.config.errorHandler方法
   6. 后端渲染专用
      1. ServerPrefetch

